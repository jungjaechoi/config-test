<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>

    <input id="config" type="text" name="config" style="width:500px; height: 2000px;">
    <input type="text" name="prev" style="display: none">
    <input type="button" value="수정" onclick="update()">



    <script type="text/javascript">

        $(document).ready(function(){
            $.ajax({
                url: `/get?path=/between/global`,
                type: "get",
                datatype: "json",
                success: function(result){

                    console.log(result);
                    const obj = JSON.parse(result);
                    console.log(obj);

                    $('input[name=config]').attr('value',JSON.stringify(obj,null,4));
                    $('input[name=prev]').attr('value',JSON.stringify(obj,null,4));
                }
            })
        });

        function update(){
            const prev = $('input[name=prev]').val();
            const now = $('input[name=config]').val();

            $(document).ready(function(){
                $.ajax({
                    url: "/diff",
                    type: "post",
                    data: {
                        'oldJson' : $('input[name=prev]').val(),
                        'newJson' : $('input[name=config]').val()
                    },
                    datatype: "json",
                    success: function(result){
                        console.log(result);
                    }
                })
            });
        }

    </script>
</body>
</html>